$('.indent_spec').bind('ajax:success', function() {
    $('.s<%=@spec.id%>').remove();
    
    <% if @spec.root? %>
        var oldParentElem = $('.s<%= @old_parent_id %>');
        oldParentElem.after("<%= j(render partial: "specs", object: @spec, as: :spec) %>");
        $('.s<%=@spec.id%> .delete_tag').removeClass('hidden');
        $('.s<%=@spec.id%> .spec-buttons').addClass('in');
    <% else %>
        $('.s<%=@spec.root.id%>').replaceWith("<%= j(render partial: "specs", object: @spec.root, as: :spec) %>");
        $('.s<%=@spec.root.id%> .delete_tag').removeClass('hidden');
        $('.s<%=@spec.root.id%> .spec-buttons').addClass('in');
    <% end %>
});