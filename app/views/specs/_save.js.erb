$("ul.errors").html("");
<% if @spec.errors.any? %>
  <% @spec.errors.full_messages.each do |message| %>
    $("ul.errors").append($("<li />").html("<%= message.html_safe %>"));
  <% end %>
<% else %>
  $("#spec-modal").modal("hide");
  
  var specSpan = $('#<%=@spec.id%>');
  
  if(specSpan.length){
    $('#<%=@spec.id %>').replaceWith("<%= j(render partial: "spec", object: @spec ) %>");
    $('#<%=@spec.id%> .delete_tag').removeClass('hidden');
    $('#<%=@spec.id%> .spec-buttons').addClass('in');
  }
  else {
    <% if @spec.parent.present? %>
      $('.s<%=@spec.parent.id %>').replaceWith("<%= j(render partial: "specs", object: @spec.parent, as: :spec) %>");
      $('.s<%=@spec.parent.id %> .delete_tag').removeClass('hidden');
      $('.s<%=@spec.parent.id %> .spec-buttons').addClass('in');
    <% else %>
      $('.full-spec-list').append("<%= j(render partial: "specs", object: @spec, as: :spec) %>");
    <% end %>
  }
  

<% end %>